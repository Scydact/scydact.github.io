'use strict';var horario=[],horarioTable=$(".horario-clases tbody tr");
horarioTable.each(function(a){var b={code:"",name:"",group:"",credits:-1,schedule:[],campus:"",teacher:""};$(this).children("td").each(function(c){if(0==c)b.code=$(this).text().trim();else if(1==c)b.name=$(this).text().trim();else if(2==c)b.credits=$(this).text().trim();else if(3==c)b.group=$(this).text().trim();else if(4<=c&&10>=c){if(0<$(this).children().length){var d={};d.day=c-4;d.time=$(this).html().split("<br>")[0];d.classroom=$(this).html().split("<br>")[1];d.type=$(this).html().split("<br>")[2];
b.schedule.push(d)}}else 11==c?b.campus=$(this).text().trim():12==c&&(b.teacher=$(this).text().trim())});horario.push(b)});var myTable=document.getElementById("beautifulSchedule");
if(null==myTable){var myDiv=document.createElement("div");myDiv.classList.add("wprTabla");myDiv.classList.add("table-responsive");$(myDiv).insertBefore(".wprTabla.table-responsive");$(myDiv).css("margin-bottom","75px");myTable=document.createElement("table");myTable.id="beautifulSchedule";myTable.classList.add("table");myDiv.appendChild(myTable)}myTable.innerHTML=null;var headers="Hora Lunes Martes Miercoles Jueves Viernes Sabado Domingo".split(" "),headersDay=[null,0,1,2,3,4,5,6,7];
function generateTableHead(a,b){a=a.createTHead().insertRow();for(let c of b){b=document.createElement("th");"Hora"!=c&&(b.style.width=(1/7*90).toString()+"%");b.style.textAlign="center";let d=document.createTextNode(c);b.appendChild(d);a.appendChild(b)}}generateTableHead(myTable,headers);function time24to12(a){return 0==a||24==a?"12AM":0<a&&11>=a?a.toString().padStart(2,"0")+"AM":12==a?"12PM":12<a&&24>a?(a-12).toString().padStart(2,"0")+"PM":null}
function time12to24(a){a=a.trim().match(/(\d{1,2})(AM|PM)/);if(3!=a.length)return null;let b=parseInt(a[1]);return"PM"==a[2]?12==b?12:b+12:"AM"==a[2]?12==b?0:b:null}function timeRangeConvert(a){a=a.match(/(\d{2}(?:AM|PM)) \/ (\d{2}(?:AM|PM))/);return 3!=a.length?null:[time12to24(a[1]),time12to24(a[2])]}
function convertClassToTime(a){let b=[];for(let c=0;24>c;c++)b.push([]);for(let c of a)for(let d of c.schedule)a={},a.classroom=d.classroom,a.time=timeRangeConvert(d.time),a.type=d.type,a.day=d.day,a.source=c,b[a.time[0]].push(a);return b}function getColorPair(a){for(var b=0,c=0;c<a.length;c++)b=a.charCodeAt(c)+((b<<5)-b);a=b%360;return[`hsl(${a},${"90%"},${"95%"})`,`hsl(${a},${"90%"},20%)`,"gray"]}
function generateTableRows(a,b,c,d){b=convertClassToTime(b);a=a.createTBody();let m=[0,0,0,0,0,0,0];for(;c<d;c++){let q=a.insertRow();var e=time24to12(c)+" / "+time24to12(c+1);e=document.createTextNode(e);var l=document.createElement("td");l.classList.add("sb-cell-center");l.appendChild(e);q.appendChild(l);let p=[];for(e=0;7>e;e++)l=document.createElement("td"),l.classList.add("sb-cell-center"),p.push(l);for(e=0;7>e;e++)0<m[e]?m[e]--:q.appendChild(p[e]);b[c].forEach((f,g,k)=>{g=p[f.day];g.classList.add("sb-cell-center-clickable");
g.appendChild(document.createTextNode(f.source.name));g.appendChild(document.createElement("br"));g.appendChild(document.createTextNode(`(${f.classroom})`));g.title=`${f.source.teacher}\nGrupo ${f.source.group}\n${f.source.campus}`;g.addEventListener("click",h=>{h=f.source;var r="";h.schedule.forEach(n=>{r+=`\n - ${"LKMJVSD"[n.day]} ${n.time} @ ${n.classroom} (${n.type})`});navigator.clipboard.writeText(`${h.name}
CODIGO: ${h.code}
GRUPO: ${h.group}
PROF: ${h.teacher}
${h.campus}
CREDITOS: ${h.credits}
HORARIO: ${r}`);alert(`Informaci\u00f3n de ${h.name} copiado al portapapeles.`)});k=getColorPair(f.source.name);g.style.backgroundColor=k[0];g.style.color=k[1];g.style.borderTopColor=k[2];k=f.time[1]-f.time[0];g.rowSpan=k;m[f.day]+=k-1})}}generateTableRows(myTable,horario,8,22);var myCss=document.getElementById("beautifulScheduleStyles");null==myCss&&(myCss=document.createElement("style"),myCss.id="beautifulScheduleStyles",document.head.appendChild(myCss));myCss.innerHTML="\n.sb-cell-center {\n    word-break: break-word;\n    vertical-align: middle !important;\n    text-align: center;\n}\n.sb-cell-center-clickable:hover {\n    filter: brightness(80%);\n}";